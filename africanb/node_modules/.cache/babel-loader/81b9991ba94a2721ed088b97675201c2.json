{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from 'axios';\nimport { API_GET_ALL_FUNCTIONNALITIES, HEADERS } from '../components/globalConfig/globalConstConfig';\nimport { FUNCTIONNALITY_CREATE_OFFRE_VOYAGE, FUNCTIONNALITY_CREATE_VILLE, FUNCTIONNALITY_LISTING_VILLE, FUNCTIONNALITY_RATTACHE_ATTESTION_TRANSPORT } from '../components/globalConfig/constFunctionnalies';\nimport { FUNCTIONNALITY_CREATE_USER_FUNCTION, FUNCTIONNALITY_CREATE_USER_ROLE } from '../components/globalConfig/constFunctionnalies';\nexport default {\n  name: 'EspaceUI',\n  data() {\n    return {\n      menuProfil: false,\n      dialogLogout: false,\n      mini: true,\n      drawer: true,\n      functionnalitiesListByUserRole: [],\n      functionnalitiesListComponents: []\n    };\n  },\n  methods: {\n    //RECUPERER LA LISTE DE TOUTES LES FONCTIONNALITÉS CREES\n    async getAllFunctionnalitiesByUserRole() {\n      await axios.post(API_GET_ALL_FUNCTIONNALITIES, {\n        data: {\n          code: this.$store.state.userAuthentified.roleCode\n        }\n      }, {\n        headers: HEADERS\n      }).then(response => {\n        if (response.status == 200) {\n          if (response.data.status.code == 800) {\n            this.functionnalitiesListByUserRole = response.data.items;\n            console.log(this.functionnalitiesListByUserRole);\n          }\n        }\n      }).catch(e => {\n        console.log(e);\n      });\n    },\n    // METHODE PERMETTANT À UN UTILISATEUR DE SE DECONNECTER\n    logout() {\n      this.$store.commit('DESTROY_SESSION_USER');\n      this.$router.replace('/');\n    }\n  },\n  computed: {\n    buildComponentFromFunctionnalities() {\n      var globalFunctionnalities = [];\n      this.functionnalitiesListByUserRole.forEach(element => {\n        if (element.code == FUNCTIONNALITY_CREATE_OFFRE_VOYAGE) {\n          var createOffreVoyageFunction = {\n            title: 'CREER UNE OFFRE DE VOYAGE',\n            icon: 'mdi-train-car',\n            navigation: '/creerOffreVoyage'\n          };\n          globalFunctionnalities.push(createOffreVoyageFunction);\n        }\n        if (element.code == FUNCTIONNALITY_CREATE_VILLE) {\n          var createTownFunction = {\n            title: 'CREER UNE VILLE',\n            icon: 'mdi-town-hall',\n            navigation: '/creerVille'\n          };\n          globalFunctionnalities.push(createTownFunction);\n        }\n        if (element.code == FUNCTIONNALITY_LISTING_VILLE) {\n          var createTownSelected = {\n            title: 'GESTION DES VILLES',\n            icon: 'mdi-town-hall',\n            navigation: '/selectionnerVille'\n          };\n          globalFunctionnalities.push(createTownSelected);\n        }\n        if (element.code == FUNCTIONNALITY_RATTACHE_ATTESTION_TRANSPORT) {\n          var bindTravelFile = {\n            title: 'DOCUMENT DE TRANSPORT',\n            icon: 'mdi-file-chart-check',\n            navigation: '/documentAttestationTransport'\n          };\n          globalFunctionnalities.push(bindTravelFile);\n        }\n        if (element.code == FUNCTIONNALITY_CREATE_USER_ROLE) {\n          var userRoleFunction = {\n            title: 'GESTION DES ROLES',\n            icon: 'mdi-account-key',\n            navigation: '/creerRoleUtilisateur'\n          };\n          globalFunctionnalities.push(userRoleFunction);\n        }\n        if (element.code == FUNCTIONNALITY_CREATE_USER_FUNCTION) {\n          var userFunction = {\n            title: 'AJOUTER DES FONCTIONNALITÉS',\n            icon: 'mdi-cog',\n            navigation: '/creerFonctionnalite'\n          };\n          globalFunctionnalities.push(userFunction);\n        }\n      });\n      return globalFunctionnalities;\n    }\n  },\n  mounted() {\n    this.getAllFunctionnalitiesByUserRole();\n  }\n};","map":{"version":3,"mappings":";AAsGA;AACA;AACA;AACA;AACA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EAEAC;IAEA;IACA;MACA;QAAAP;UAAAQ;QAAA;MAAA;QAAAC;MAAA;QACA;UACA;YACA;YACAC;UACA;QACA;MACA;QACAA;MACA;IACA;IAEA;IACAC;MACA;MACA;IACA;EAEA;EAEAC;IAEAC;MACA;MACA;QACA;UACA;YAAAC;YAAAC;YAAAC;UAAA;UACAC;QACA;QACA;UACA;YAAAH;YAAAC;YAAAC;UAAA;UACAC;QACA;QACA;UACA;YAAAH;YAAAC;YAAAC;UAAA;UACAC;QACA;QACA;UACA;YAAAH;YAAAC;YAAAC;UAAA;UACAC;QACA;QACA;UACA;YAAAH;YAAAC;YAAAC;UAAA;UACAC;QACA;QACA;UACA;YAAAH;YAAAC;YAAAC;UAAA;UACAC;QACA;MACA;MACA;IACA;EAEA;EAEAC;IACA;EACA;AACA","names":["name","data","menuProfil","dialogLogout","mini","drawer","functionnalitiesListByUserRole","functionnalitiesListComponents","methods","code","headers","console","logout","computed","buildComponentFromFunctionnalities","title","icon","navigation","globalFunctionnalities","mounted"],"sourceRoot":"src/views","sources":["EspaceUserAdmin.vue"],"sourcesContent":["<template>\n    <v-app>\n        <v-navigation-drawer app v-model=\"drawer\" :mini-variant.sync=\"mini\">\n            <v-list-item>\n                <v-list-item-content>\n                    <v-list-item-title class=\"text-h6 font-weight-thin\">{{ $store.state.userAuthentified.compagnieTransportRaisonSociale }}</v-list-item-title>\n                    <v-list-item-subtitle>Société AFRICANB</v-list-item-subtitle>\n                </v-list-item-content>\n            </v-list-item>\n\n            <v-divider></v-divider>\n\n            <v-list dense nav>\n                <v-list-item link @click=\"$router.push({path:'/tableauBord'}).catch(() => {})\">\n                <v-list-item-icon>\n                    <v-icon color=\"teal\">mdi-view-dashboard</v-icon>\n                </v-list-item-icon>\n        \n                <v-list-item-content>\n                    <v-list-item-title>TABLEAU DE BORD</v-list-item-title>\n                </v-list-item-content>\n                </v-list-item>\n            </v-list>\n            \n            <v-list dense nav v-for=\"menu in buildComponentFromFunctionnalities\" :key=\"menu.title\">\n                <v-list-item link @click=\"$router.push({path:menu.navigation}).catch(() => {})\">\n                <v-list-item-icon>\n                    <v-icon color=\"teal\">{{ menu.icon }}</v-icon>\n                </v-list-item-icon>\n        \n                <v-list-item-content>\n                    <v-list-item-title>{{ menu.title.toUpperCase() }}</v-list-item-title>\n                </v-list-item-content>\n                </v-list-item>\n            </v-list>\n        </v-navigation-drawer>\n\n        <v-app-bar app color=\"white\">\n            <v-app-bar-nav-icon color=\"dark\" @click=\"drawer = !drawer\"></v-app-bar-nav-icon>\n            <v-toolbar-title>\n                <v-img max-height=\"50px\" max-width=\"75px\" src=\"../assets/logo_africanbus.jpg\"></v-img>\n            </v-toolbar-title>\n            <v-spacer></v-spacer>\n\n            <v-menu v-model=\"menuProfil\" :close-on-content-click=\"false\" :nudge-width=\"200\" offset-x>\n                <template v-slot:activator=\"{ on, attrs }\">\n                    <v-btn icon color=\"transparent\" v-bind=\"attrs\" v-on=\"on\"><v-avatar size=\"30\"><v-img src=\"../assets/undraw_profile.svg\"></v-img></v-avatar></v-btn>\n                </template>\n        \n                <v-card>\n                    <v-list>\n                        <v-list-item>  \n                        <v-list-item-content>\n                            <v-list-item-title>{{ $store.state.userAuthentified.prenoms }}  {{ $store.state.userAuthentified.nom }}</v-list-item-title>\n                            <v-list-item-subtitle>{{ $store.state.userAuthentified.email }}</v-list-item-subtitle>\n                        </v-list-item-content>\n                        </v-list-item>\n                    </v-list>\n        \n                    <v-divider></v-divider>\n        \n                    <v-list>\n                        <v-list-item link @click=\"$router.push({name:'userProfilCompagnieTransport'}).catch(() => {})\">\n                            <v-list-item-icon>\n                                <v-icon>mdi-account-cog</v-icon>\n                            </v-list-item-icon>\n                            <v-list-item-title><span class=\"font-weight-thin\">Mon profil</span></v-list-item-title>\n                        </v-list-item>\n\n                        <v-list-item link @click=\"$router.push({name:'resetPasswordCompagnieTransport'}).catch(() => {})\">\n                            <v-list-item-icon>\n                                <v-icon>mdi-account-key</v-icon>\n                            </v-list-item-icon>\n                            <v-list-item-title><span class=\"font-weight-thin\">Changer le mot de passe</span></v-list-item-title>\n                        </v-list-item>\n            \n                        <v-list-item link>\n                            <v-list-item-icon>\n                                <v-icon>mdi-logout</v-icon>\n                            </v-list-item-icon>\n                            <v-dialog v-model=\"dialogLogout\" persistent max-width=\"290\">\n                                <template v-slot:activator=\"{ on, attrs }\">\n                                    <v-list-item-title v-on=\"on\" v-bind=\"attrs\" class=\"font-weight-thin\">Déconnexion</v-list-item-title>\n                                </template>\n                                <v-card>\n                                    <v-card-title class=\"text-h5\">Voulez-vous vraiment vous déconnecter ?</v-card-title>\n                                    <v-card-actions>\n                                        <v-spacer></v-spacer>\n                                        <v-btn color=\"primary\" @click=\"dialogLogout = false\" text>Annuler</v-btn>\n                                        <v-btn color=\"primary\" @click=\"logout\" text>Accepter</v-btn>\n                                    </v-card-actions>\n                                </v-card>\n                            </v-dialog>\n                        </v-list-item>\n                    </v-list>\n                </v-card>\n            </v-menu>\n        </v-app-bar>\n    </v-app>\n</template>\n\n<script>\nimport axios from 'axios';\nimport { API_GET_ALL_FUNCTIONNALITIES , HEADERS } from '../components/globalConfig/globalConstConfig'\nimport { FUNCTIONNALITY_CREATE_OFFRE_VOYAGE , FUNCTIONNALITY_CREATE_VILLE , FUNCTIONNALITY_LISTING_VILLE , FUNCTIONNALITY_RATTACHE_ATTESTION_TRANSPORT } from '../components/globalConfig/constFunctionnalies'\nimport { FUNCTIONNALITY_CREATE_USER_FUNCTION , FUNCTIONNALITY_CREATE_USER_ROLE} from '../components/globalConfig/constFunctionnalies'\nexport default {\n    name:'EspaceUI',\n    data(){\n        return{\n            menuProfil:false,\n            dialogLogout : false,\n            mini:true,\n            drawer: true,\n            functionnalitiesListByUserRole : [],\n            functionnalitiesListComponents : []\n        }\n    },\n\n    methods :{\n\n        //RECUPERER LA LISTE DE TOUTES LES FONCTIONNALITÉS CREES\n        async getAllFunctionnalitiesByUserRole(){\n            await axios.post(API_GET_ALL_FUNCTIONNALITIES, { data : { code : this.$store.state.userAuthentified.roleCode } }, { headers : HEADERS } ).then((response) => {\n                if (response.status == 200) {\n                    if (response.data.status.code == 800) {\n                        this.functionnalitiesListByUserRole = response.data.items;\n                        console.log(this.functionnalitiesListByUserRole)\n                    }\n                }\n            }).catch((e) => {\n                console.log(e)\n            })\n        },\n\n        // METHODE PERMETTANT À UN UTILISATEUR DE SE DECONNECTER\n        logout() {\n            this.$store.commit('DESTROY_SESSION_USER');\n            this.$router.replace('/')\n        },\n\n    },\n\n    computed:{\n\n        buildComponentFromFunctionnalities(){\n            var globalFunctionnalities = [];\n            this.functionnalitiesListByUserRole.forEach(element => {\n                if (element.code == FUNCTIONNALITY_CREATE_OFFRE_VOYAGE) {\n                    var createOffreVoyageFunction = { title : 'CREER UNE OFFRE DE VOYAGE' , icon : 'mdi-train-car' , navigation : '/creerOffreVoyage' };\n                    globalFunctionnalities.push(createOffreVoyageFunction);\n                }\n                if (element.code == FUNCTIONNALITY_CREATE_VILLE) {\n                    var createTownFunction = { title : 'CREER UNE VILLE' , icon : 'mdi-town-hall' , navigation : '/creerVille' };\n                    globalFunctionnalities.push(createTownFunction);\n                }\n                if (element.code == FUNCTIONNALITY_LISTING_VILLE) {\n                    var createTownSelected = { title : 'GESTION DES VILLES' , icon : 'mdi-town-hall' , navigation : '/selectionnerVille' };\n                    globalFunctionnalities.push(createTownSelected);\n                }\n                if (element.code == FUNCTIONNALITY_RATTACHE_ATTESTION_TRANSPORT) {\n                    var bindTravelFile = { title : 'DOCUMENT DE TRANSPORT' , icon : 'mdi-file-chart-check' , navigation : '/documentAttestationTransport' };\n                    globalFunctionnalities.push(bindTravelFile);\n                }\n                if (element.code == FUNCTIONNALITY_CREATE_USER_ROLE) {\n                    var userRoleFunction = { title : 'GESTION DES ROLES' , icon : 'mdi-account-key' , navigation : '/creerRoleUtilisateur' };\n                    globalFunctionnalities.push(userRoleFunction);\n                }\n                if (element.code == FUNCTIONNALITY_CREATE_USER_FUNCTION) {\n                    var userFunction = { title : 'AJOUTER DES FONCTIONNALITÉS' , icon : 'mdi-cog' , navigation : '/creerFonctionnalite' };\n                    globalFunctionnalities.push(userFunction);\n                }\n            });\n            return globalFunctionnalities ; \n        }\n\n    },\n\n    mounted(){\n        this.getAllFunctionnalitiesByUserRole();\n    }\n}\n</script>"]},"metadata":{},"sourceType":"module"}