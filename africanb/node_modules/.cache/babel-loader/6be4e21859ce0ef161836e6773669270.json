{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nimport $ from 'jquery';\nimport { API_OBENIR_JOUR_SEMAINE_PAR_OFFRE_VOYAGE, API_RECUPERER_PRIX_PAR_OFFRE_VOYAGE, HEADERS } from '../globalConfig/globalConstConfig';\nexport default {\n  name: \"ReservationBillet\",\n  data() {\n    return {\n      user: {\n        nom: null,\n        prenoms: null,\n        telephone: null\n      },\n      dialog: false,\n      offreVoyage: {\n        id: null,\n        designation: null,\n        description: null,\n        compagnieTransportRaisonSociale: \"COMPAGNIE KOUEVI CT\",\n        typeOffreVoyageDesignation: null,\n        villeDepartDesignation: null,\n        villeDestinationDesignation: null\n      },\n      jourSemainesParOffreVoyagesList: [],\n      prixEtModeParOffreVoyageList: [],\n      offreVoyageObject: {\n        data: {\n          designation: null\n        }\n      },\n      jourVoyageSelected: null\n    };\n  },\n  methods: {\n    // PROCEDER A LA RESERVATION\n    chooseCategorieVoyageur() {\n      this.dialog = true;\n    },\n    async retrieveOffreSelected() {\n      if (localStorage.getItem(\"offreVoyageSelected\")) {\n        try {\n          const offreVoyageEditing = JSON.parse(localStorage.getItem(\"offreVoyageSelected\"));\n          this.offreVoyage.id = offreVoyageEditing.id;\n          this.offreVoyage.designation = offreVoyageEditing.designation;\n          this.offreVoyage.description = offreVoyageEditing.description;\n          this.offreVoyage.typeOffreVoyageDesignation = offreVoyageEditing.typeOffreVoyageDesignation;\n          this.offreVoyage.villeDepartDesignation = offreVoyageEditing.villeDepartDesignation;\n          this.offreVoyage.villeDestinationDesignation = offreVoyageEditing.villeDestinationDesignation;\n          this.offreVoyageObject.data.designation = this.offreVoyage.designation;\n          await axios.post(API_OBENIR_JOUR_SEMAINE_PAR_OFFRE_VOYAGE, this.offreVoyageObject, {\n            headers: HEADERS(this.$store.state.userAuthentified.token)\n          }).then(response => {\n            if (response.data.status.code == 800) {\n              this.jourSemainesParOffreVoyagesList = response.data.items;\n            } else {\n              this.jourSemainesParOffreVoyagesList = [];\n            }\n          }).catch(e => {\n            this.errorMsg = e;\n            $(\".alert-error\").fadeIn();\n            setTimeout(function () {\n              $(\".alert-error\").fadeOut();\n            }, 4000);\n          });\n          await axios.post(API_RECUPERER_PRIX_PAR_OFFRE_VOYAGE, this.offreVoyageObject, {\n            headers: HEADERS(this.$store.state.userAuthentified.token)\n          }).then(response => {\n            if (response.data.status.code == 800) {\n              this.prixEtModeParOffreVoyageList = response.data.items;\n            } else {\n              this.prixEtModeParOffreVoyageList = [];\n            }\n          }).catch(e => {\n            this.errorMsg = e;\n            $(\".alert-error\").fadeIn();\n            setTimeout(function () {\n              $(\".alert-error\").fadeOut();\n            }, 4000);\n          });\n          //localStorage.removeItem(\"offreVoyage\");\n        } catch (error) {\n          localStorage.removeItem(\"offreVoyage\");\n        }\n      }\n    }\n  },\n  computed: {\n    getProgrammeFromDaySelected() {\n      let programmeDTOList = [];\n      this.jourSemainesParOffreVoyagesList.forEach(element => {\n        if (this.jourVoyageSelected == element.jourSemaineDesignation) {\n          if (element.programmeDTOList != null || element.programmeDTOList != undefined) {\n            element.programmeDTOList.forEach(item => {\n              programmeDTOList.push(item);\n            });\n          }\n        }\n      });\n      return programmeDTOList;\n    }\n  },\n  mounted() {\n    this.retrieveOffreSelected();\n  }\n};","map":{"version":3,"mappings":";AAyJA;AACA;AACA;AACA;EACAA;EACAC;IACA;MAEAC;QACAC;QACAC;QACAC;MACA;MAEAC;MAEAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MAIAC;MACAC;MAEAC;QACAhB;UACAQ;QACA;MACA;MAEAS;IAEA;EACA;EAEAC;IAEA;IACAC;MACA;IACA;IAEA;MACA;QACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;YAAAC;UAAA;YACA;cACA;YACA;cACA;YACA;UACA;YACA;YACAC;YACAC;cACAD;YACA;UACA;UAEA;YAAAD;UAAA;YACA;cACA;YACA;cACA;YACA;UACA;YACA;YACAC;YACAC;cACAD;YACA;UACA;UACA;QACA;UACAE;QACA;MACA;IACA;EACA;EAEAC;IAEAC;MACA;MACA;QACA;UACA;YACAC;cACAC;YACA;UACA;QAEA;MACA;MACA;IACA;EACA;EAEAC;IACA;EACA;AACA","names":["name","data","user","nom","prenoms","telephone","dialog","offreVoyage","id","designation","description","compagnieTransportRaisonSociale","typeOffreVoyageDesignation","villeDepartDesignation","villeDestinationDesignation","jourSemainesParOffreVoyagesList","prixEtModeParOffreVoyageList","offreVoyageObject","jourVoyageSelected","methods","chooseCategorieVoyageur","headers","$","setTimeout","localStorage","computed","getProgrammeFromDaySelected","element","programmeDTOList","mounted"],"sourceRoot":"src/components/vendeur","sources":["ReservationBillet.vue"],"sourcesContent":["<template>\n    <v-app>\n        <v-container fluid>\n            <v-sheet color=\"#b2bec3\">\n                <v-container>\n                    <v-card elevation=\"5\">\n                        <v-card-title><span class=\"title-card\">DÉTAIL SUR L'OFFRE:</span></v-card-title>\n                        <v-card-text>\n                            <div class=\"row\">\n                                <div class=\"col-sm-6\">\n                                    <v-container>\n                                        <v-card>\n                                            <v-card-title><span class=\"designation-offre\">{{ offreVoyage.designation }}</span></v-card-title>\n                                            <v-card-text>\n                                                <v-container>\n                                                    <v-row>\n                                                        <span>Type de l'offre :</span>&nbsp;&nbsp;\n                                                        <span>{{ offreVoyage.typeOffreVoyageDesignation }}</span>\n                                                    </v-row><br><br>\n                                                    <v-row>\n                                                        <v-icon dense color=\"teal\">mdi-circle</v-icon>&nbsp;&nbsp; Gare départ : <span class=\"gareDepart\">{{ offreVoyage.villeDepartDesignation }}</span>  \n                                                    </v-row><br><br>\n                                                    <v-row>\n                                                        <v-icon dense color=\"#2C3A47\">mdi-circle</v-icon>&nbsp;&nbsp; Gare destination : <span class=\"gareDestination\">{{ offreVoyage.villeDestinationDesignation }} </span>  \n                                                    </v-row>        \n                                                </v-container>\n                                            </v-card-text>\n                                        </v-card>\n                                    </v-container>\n                                </div>\n\n                                <div class=\"col-sm-6\">\n                                    <v-container>\n                                        <v-card>\n                                            <v-card-text>\n                                                <v-container>\n                                                    <div class=\"form-group\">\n                                                        <label>Choisissez le jour du voyage:</label>\n                                                        <v-select :items=\"jourSemainesParOffreVoyagesList\" item-text=\"jourSemaineDesignation\" item-value=\"jourSemaineDesignation\" v-model=\"jourVoyageSelected\" dense outlined></v-select>\n                                                    </div>\n\n                                                    <div class=\"form-group\" v-if=\"jourVoyageSelected\">\n                                                        <label>Choisissez l'heure de départ:</label>\n                                                        <v-select :items=\"getProgrammeFromDaySelected\" item-text=\"heureDepart\" dense outlined></v-select>\n                                                    </div>\n                                                </v-container>\n                                            </v-card-text>\n                                        </v-card>\n                                    </v-container>\n                                </div>\n                            </div>\n                            <v-divider></v-divider>\n                            <div class=\"row\">\n                                <div class=\"col-sm-6\" v-for=\"(mode,index) in prixEtModeParOffreVoyageList\" :key=\"index\">\n                                    <v-card>\n                                        <v-card-title>Mode n°{{ index + 1}}</v-card-title>\n                                        <v-card-text>\n                                            <v-container>\n                                                <v-row>\n                                                    <v-col><small class=\"muted-text\">Mode de l'offre :</small></v-col>\n                                                    <v-col><span class=\"label-text font-weight-bold\">{{ mode.modeDesignation }}</span></v-col>\n                                                </v-row>\n\n                                                <v-row>\n                                                    <v-col><small class=\"muted-text\">Catégorie :</small></v-col>\n                                                    <v-col><span class=\"label-text font-weight-bold\">{{ mode.categorieVoyageurDesignation }}</span></v-col>\n                                                </v-row>\n                                                <v-row>\n                                                    <v-col><small class=\"muted-text\">Prix de l'offre :</small></v-col>\n                                                    <v-col><span class=\"label-text font-weight-bold\">{{ mode.prix }} FCFA</span></v-col>\n                                                </v-row>\n                                            </v-container>\n                                        </v-card-text>\n                                    </v-card>\n                                </div>\n                            </div>\n                        </v-card-text>\n                    </v-card><br>\n                    <v-card elevation=\"5\">\n                        <v-card-title><span class=\"title-card\">INFORMATION DU CLIENT:</span></v-card-title>\n                        <v-card-text>\n                            <form>\n                                <div class=\"form-row\">\n                                    <div class=\"form-group col-md-6\">\n                                        <label for=\"inputEmail4\">Nom du voyageur:</label>\n                                        <input type=\"text\" class=\"form-control\" id=\"inputEmail4\">\n                                    </div>\n                                    <div class=\"form-group col-md-6\">\n                                        <label for=\"inputPassword4\">Prenom du voyageur:</label>\n                                        <input type=\"prenom\" class=\"form-control\" id=\"inputPassword4\">\n                                    </div>\n                                </div>\n                                <div class=\"form-row\">\n                                    <div class=\"form-group col-md-6\">\n                                        <label for=\"inputEmail4\">Numero de téléphone:</label>\n                                        <input type=\"text\" class=\"form-control\" id=\"inputEmail4\">\n                                    </div>\n                                </div>\n                            </form>\n                        </v-card-text>\n                    </v-card><br>\n\n                    <v-card elevation=\"5\">\n                        <v-card-title><span class=\"title-card\">CHOIX DU MODE DE PAIEMENT:</span></v-card-title>\n                        <v-card-text>\n                            <v-container>\n                                <v-radio-group row>\n                                    <v-radio label=\"En espèces\" value=\"radio-1\"></v-radio>\n                                </v-radio-group>\n                            </v-container>\n                        </v-card-text>\n                    </v-card><br>\n                </v-container>  \n                <v-card-actions>\n                    <v-btn x-small color=\"secondary\">RETOUR</v-btn>\n                    <v-btn x-small color=\"teal\" @click=\"chooseCategorieVoyageur\"><span class=\"btn-title\">RESERVER POUR CE TRAJET</span></v-btn>\n                </v-card-actions>         \n            </v-sheet>\n        </v-container>\n\n        <v-dialog v-model=\"dialog\" max-width>\n            <v-sheet color=\"white\">\n                <v-container>\n                    <v-card elevation=\"5\">\n                        <v-card-title><span class=\"font-weight-bold\">OFFRE DE VOYAGE</span></v-card-title>\n                        <v-card-text>\n                            <v-container>\n                                <v-row>\n                                    <span>Type de l'offre :</span>&nbsp;&nbsp;\n                                    <span>{{ offreVoyage.typeOffreVoyageDesignation }}</span>\n                                </v-row><br><br>\n                                <v-row>\n                                    <v-icon dense color=\"teal\">mdi-circle</v-icon>&nbsp;&nbsp; Gare départ : <span class=\"gareDepart\">{{ offreVoyage.villeDepartDesignation }}</span>  \n                                </v-row><br><br>\n                                <v-row>\n                                    <v-icon dense color=\"#2C3A47\">mdi-circle</v-icon>&nbsp;&nbsp; Gare destination : <span class=\"gareDestination\">{{ offreVoyage.villeDestinationDesignation }} </span>  \n                                </v-row>        \n                                                    </v-container>\n                        </v-card-text>\n                        <v-card-actions>\n                            <v-btn x-small color=\"secondary\">Anunuler</v-btn>\n                            <v-btn x-small color=\"success\">Confirmer la reservation</v-btn>\n                        </v-card-actions>\n                    </v-card>\n                </v-container>\n                    \n            </v-sheet>\n            <v-divider vertical></v-divider>\n        </v-dialog>\n    </v-app>\n</template>\n\n<script>\nimport axios from \"axios\"\nimport $ from 'jquery'\nimport { API_OBENIR_JOUR_SEMAINE_PAR_OFFRE_VOYAGE , API_RECUPERER_PRIX_PAR_OFFRE_VOYAGE , HEADERS } from '../globalConfig/globalConstConfig'\nexport default {\n    name:\"ReservationBillet\",\n    data(){\n        return{\n\n            user:{\n                nom : null,\n                prenoms : null,\n                telephone : null\n            },\n\n            dialog:false,\n\n            offreVoyage:{\n                id:null,\n                designation : null ,\n                description: null,\n                compagnieTransportRaisonSociale : \"COMPAGNIE KOUEVI CT\",\n                typeOffreVoyageDesignation : null,\n                villeDepartDesignation : null,\n                villeDestinationDesignation : null\n            },\n    \n            \n\n            jourSemainesParOffreVoyagesList : [],\n            prixEtModeParOffreVoyageList:[],\n\n            offreVoyageObject:{\n                data:{\n                    designation:null\n                }\n            },\n\n            jourVoyageSelected: null\n\n        }\n    },\n\n    methods:{\n        \n        // PROCEDER A LA RESERVATION\n        chooseCategorieVoyageur(){\n            this.dialog = true\n        },\n\n        async retrieveOffreSelected(){\n            if (localStorage.getItem(\"offreVoyageSelected\")) {\n                try {\n                    const offreVoyageEditing = JSON.parse(localStorage.getItem(\"offreVoyageSelected\"));\n                    this.offreVoyage.id = offreVoyageEditing.id;\n                    this.offreVoyage.designation = offreVoyageEditing.designation;\n                    this.offreVoyage.description = offreVoyageEditing.description;\n                    this.offreVoyage.typeOffreVoyageDesignation = offreVoyageEditing.typeOffreVoyageDesignation;\n                    this.offreVoyage.villeDepartDesignation = offreVoyageEditing.villeDepartDesignation;\n                    this.offreVoyage.villeDestinationDesignation = offreVoyageEditing.villeDestinationDesignation;\n                    this.offreVoyageObject.data.designation = this.offreVoyage.designation;\n                    await axios.post(API_OBENIR_JOUR_SEMAINE_PAR_OFFRE_VOYAGE , this.offreVoyageObject , { headers : HEADERS(this.$store.state.userAuthentified.token) }).then((response) => {\n                        if (response.data.status.code == 800) {\n                            this.jourSemainesParOffreVoyagesList = response.data.items\n                        }else{\n                            this.jourSemainesParOffreVoyagesList = [];\n                        }\n                    }).catch((e) => {\n                        this.errorMsg = e ;\n                        $(\".alert-error\").fadeIn();\n                        setTimeout(function(){\n                            $(\".alert-error\").fadeOut(); \n                        }, 4000)\n                    })\n\n                    await axios.post(API_RECUPERER_PRIX_PAR_OFFRE_VOYAGE, this.offreVoyageObject , { headers : HEADERS(this.$store.state.userAuthentified.token) }).then((response) => {\n                        if (response.data.status.code == 800) {\n                            this.prixEtModeParOffreVoyageList = response.data.items\n                        }else{\n                            this.prixEtModeParOffreVoyageList = [];\n                        }\n                    }).catch((e) => {\n                        this.errorMsg = e ;\n                        $(\".alert-error\").fadeIn();\n                        setTimeout(function(){\n                            $(\".alert-error\").fadeOut(); \n                        }, 4000)\n                    })\n                    //localStorage.removeItem(\"offreVoyage\");\n                } catch (error) {\n                    localStorage.removeItem(\"offreVoyage\");\n                }\n            }\n        },\n    },\n\n    computed:{\n        \n        getProgrammeFromDaySelected(){\n            let programmeDTOList = [];\n            this.jourSemainesParOffreVoyagesList.forEach(element => {\n                if (this.jourVoyageSelected == element.jourSemaineDesignation) {\n                    if(element.programmeDTOList != null || element.programmeDTOList != undefined){\n                        element.programmeDTOList.forEach(item => {\n                            programmeDTOList.push(item)\n                        });\n                    }\n                    \n                }\n            });\n            return programmeDTOList\n        }\n    },\n\n    mounted(){\n        this.retrieveOffreSelected();\n    }\n}\n</script>\n\n<style scoped>\n    .title-card{\n        font-weight: bold;\n        font-size: 12px;\n    }\n\n    .designation-offre{\n        font-weight: 700;\n        color: #303952;\n    }\n\n    .btn-title{\n        color: white;\n    }\n\n    .gareDepart{\n        font-size: 15px;\n        color: teal;\n        font-weight: bold;\n    }\n\n    .gareDestination{\n        font-size: 15px;\n        color: #2C3A47;\n        font-weight: bold;\n    }\n</style>"]},"metadata":{},"sourceType":"module"}